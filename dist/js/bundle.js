!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CookieControl=t():e.CookieControl=t()}(window,(function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(1);function a(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{optionalCookies:[]},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ng-cc";s(this,e),this.el=document.getElementById(i),this.options=Object.assign({},{open:!0,lifetime:365,acceptValue:"1",revokeValue:"0",timeout:200,domain:null,optionCookieHtml:function(e){return'<li>\n          <input type="checkbox" class="ng-cc-optional-checkbox" id="ng-cc-'+e.name+'" data-name="'+e.name+'" '+(e.accepted?"checked":"")+' />\n          <label for="ng-cc-'+e.name+'">\n            <i class="ng-cc-checkbox-icon">\n              <span class="on">'+document.getElementsByClassName("ng-cc-on")[0].textContent+'</span>\n              <span class="off">'+document.getElementsByClassName("ng-cc-off")[0].textContent+"</span>\n            </i>"+(e.label?e.label:"")+"\n          </label>\n          "+(e.description?"<p>"+e.description+"</p>":"")+"\n        </li>"}},o.options),this.opened=!1,this.acceptedCookies="accepted"===(0,c.getCookie)("ng-cc-accepted"),this.optionalCookies={},this.optionalCookiesByName=[],o.optionalCookies.forEach((function(e){var o=e.cookieName||"ng-cc-"+e.name,i=(0,c.getCookie)(o),a=n({},e,{cookieName:o,accepted:i!==t.options.revokeValue&&(i===t.options.acceptValue||e.accepted)});!i&&a.accepted&&(0,c.setCookie)(a.cookieName,t.options.acceptValue,t.options.lifetime,t.options.domain),t.optionalCookies[a.name]=a,t.optionalCookiesByName.push(a.name),a.accepted?a.onAccept&&a.onAccept():a.onRevoke&&a.onRevoke()}))}return i(e,[{key:"init",value:function(){this.el&&(this.renderOptional(),this.setupEvents(),!this.acceptedCookies&&this.options.open&&window.setTimeout(this.open.bind(this),this.options.timeout))}},{key:"setupEvents",value:function(){var e=this;[].concat(a(document.getElementsByClassName("ng-cc-toggle"))).forEach((function(t){t.addEventListener("click",(function(t){return t.preventDefault(),e.opened?e.close():e.open()}))})),[].concat(a(document.getElementsByClassName("ng-cc-close"))).forEach((function(t){t.addEventListener("click",e.close.bind(e))})),[].concat(a(document.getElementsByClassName("js-open-ng-cc"))).forEach((function(t){t.addEventListener("click",e.open.bind(e))})),document.getElementById("ng-cc-accept").addEventListener("click",(function(){[].concat(a(document.getElementsByClassName("ng-cc-optional-checkbox"))).forEach((function(t){t.checked=!0,t.dataset.name in e.optionalCookies&&(e.optionalCookies[t.dataset.name].accepted=!0,e.saveCookie(e.optionalCookies[t.dataset.name]))})),e.accept()})),document.getElementById("ng-cc-optional-save").addEventListener("click",this.accept.bind(this)),[].concat(a(this.el.getElementsByClassName("ng-cc-optional-checkbox"))).forEach((function(t){t.addEventListener("change",e.toggleCookie.bind(e))}))}},{key:"open",value:function(e){e&&e.preventDefault(),this.el.setAttribute("open",""),this.opened=!0}},{key:"close",value:function(e){e&&e.preventDefault(),this.el.removeAttribute("open"),this.opened=!1}},{key:"renderOptional",value:function(){var e=this,t="";this.optionalCookiesByName.forEach((function(o){var n=e.optionalCookies[o];t+=e.options.optionCookieHtml(n)})),this.el.querySelector(".ng-cc-optional-list ul").innerHTML+=t}},{key:"toggleCookie",value:function(e){this.optionalCookies[e.target.dataset.name].accepted=e.target.checked,this.saveCookie(this.optionalCookies[e.target.dataset.name]),this.options.onChange&&this.options.onChange(e,this)}},{key:"saveAll",value:function(){var e=this;this.optionalCookiesByName.forEach((function(t){return e.saveCookie(e.optionalCookies[t])}))}},{key:"saveCookie",value:function(e){(0,c.setCookie)(e.cookieName,e.accepted?this.options.acceptValue:this.options.revokeValue,this.options.lifetime,this.options.domain)}},{key:"accept",value:function(e){e&&e.preventDefault(),(0,c.setCookie)("ng-cc-accepted","accepted",this.options.lifetime,this.options.domain),this.saveAll(),this.close(),this.options.onAccept&&this.options.onAccept(this)}},{key:"set",value:function(e,t){this.options[e]=t}}]),e}();t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCookie=function(e,t,o,n){var i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3);var c="expires="+i.toUTCString(),a=n?";domain="+n:"";document.cookie=e+"="+t+";"+c+a+";path=/"},t.getCookie=function(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""}}])}));